{
  "version": "1.0.0",
  "metadata": {
    "created": "2026-01-14T10:18:53.891Z",
    "modified": "2026-01-14T10:18:53.891Z",
    "name": "Thermostat",
    "description": "Relay based Temperature Control of a House"
  },
  "graph": {
    "nodes": [
      {
        "id": "07cc8b10-cb17-4c88-8e35-0c2482ed003b",
        "type": "Relay",
        "name": "Relay",
        "position": {
          "x": 735,
          "y": 180
        },
        "inputs": [
          {
            "id": "07cc8b10-cb17-4c88-8e35-0c2482ed003b-input-0",
            "nodeId": "07cc8b10-cb17-4c88-8e35-0c2482ed003b",
            "name": "in",
            "direction": "input",
            "index": 0,
            "color": "#969696"
          }
        ],
        "outputs": [
          {
            "id": "07cc8b10-cb17-4c88-8e35-0c2482ed003b-output-0",
            "nodeId": "07cc8b10-cb17-4c88-8e35-0c2482ed003b",
            "name": "out",
            "direction": "output",
            "index": 0,
            "color": "#969696"
          }
        ],
        "params": {
          "_rotation": 2,
          "threshold_up": "T_hi",
          "threshold_down": "T_lo",
          "value_up": "0",
          "value_down": "H"
        }
      },
      {
        "id": "62d00cb6-4196-4a37-b9da-ab858bc7ba2d",
        "type": "Constant",
        "name": "Ambient Const",
        "position": {
          "x": 405,
          "y": 120
        },
        "inputs": [],
        "outputs": [
          {
            "id": "62d00cb6-4196-4a37-b9da-ab858bc7ba2d-output-0",
            "nodeId": "62d00cb6-4196-4a37-b9da-ab858bc7ba2d",
            "name": "out",
            "direction": "output",
            "index": 0,
            "color": "#969696"
          }
        ],
        "params": {
          "value": "T_a"
        }
      },
      {
        "id": "e9ec04e8-6f0b-4a0a-96ef-b0fcb78fba8b",
        "type": "SinusoidalSource",
        "name": "Ambient Day",
        "position": {
          "x": 405,
          "y": 180
        },
        "inputs": [],
        "outputs": [
          {
            "id": "e9ec04e8-6f0b-4a0a-96ef-b0fcb78fba8b-output-0",
            "nodeId": "e9ec04e8-6f0b-4a0a-96ef-b0fcb78fba8b",
            "name": "out",
            "direction": "output",
            "index": 0,
            "color": "#969696"
          }
        ],
        "params": {
          "amplitude": "T_d",
          "frequency": "1/24"
        }
      },
      {
        "id": "2eaf0529-6a47-4a10-b162-d94d188c97d6",
        "type": "Adder",
        "name": "Adder",
        "position": {
          "x": 540,
          "y": 255
        },
        "inputs": [
          {
            "id": "2eaf0529-6a47-4a10-b162-d94d188c97d6-input-0",
            "nodeId": "2eaf0529-6a47-4a10-b162-d94d188c97d6",
            "name": "in 0",
            "direction": "input",
            "index": 0,
            "color": "#969696"
          },
          {
            "id": "2eaf0529-6a47-4a10-b162-d94d188c97d6-input-1",
            "nodeId": "2eaf0529-6a47-4a10-b162-d94d188c97d6",
            "name": "in 1",
            "direction": "input",
            "index": 1,
            "color": "#969696"
          }
        ],
        "outputs": [
          {
            "id": "2eaf0529-6a47-4a10-b162-d94d188c97d6-output-0",
            "nodeId": "2eaf0529-6a47-4a10-b162-d94d188c97d6",
            "name": "out",
            "direction": "output",
            "index": 0,
            "color": "#969696"
          }
        ],
        "params": {
          "_rotation": 1
        }
      },
      {
        "id": "00cd6eb8-c4f5-4014-85de-2db88eb99f20",
        "type": "Subsystem",
        "name": "House",
        "position": {
          "x": 735,
          "y": 255
        },
        "inputs": [
          {
            "id": "00cd6eb8-c4f5-4014-85de-2db88eb99f20-input-0",
            "nodeId": "00cd6eb8-c4f5-4014-85de-2db88eb99f20",
            "name": "in 0",
            "direction": "input",
            "index": 0,
            "color": "#969696"
          },
          {
            "id": "00cd6eb8-c4f5-4014-85de-2db88eb99f20-input-1",
            "nodeId": "00cd6eb8-c4f5-4014-85de-2db88eb99f20",
            "name": "in 1",
            "direction": "input",
            "index": 1,
            "color": "#969696"
          }
        ],
        "outputs": [
          {
            "id": "00cd6eb8-c4f5-4014-85de-2db88eb99f20-output-0",
            "nodeId": "00cd6eb8-c4f5-4014-85de-2db88eb99f20",
            "name": "out 0",
            "direction": "output",
            "index": 0,
            "color": "#969696"
          }
        ],
        "params": {},
        "graph": {
          "nodes": [
            {
              "id": "aaa27cad-0e92-4250-85d1-6f3ef379f0ee",
              "type": "Interface",
              "name": "Subsystem",
              "position": {
                "x": -60,
                "y": 90
              },
              "inputs": [],
              "outputs": [],
              "params": {}
            },
            {
              "id": "59e8b939-3b30-49dc-8ece-e2352dc6cd32",
              "type": "Adder",
              "name": "Total Flux",
              "position": {
                "x": 270,
                "y": 225
              },
              "inputs": [
                {
                  "id": "59e8b939-3b30-49dc-8ece-e2352dc6cd32-input-0",
                  "nodeId": "59e8b939-3b30-49dc-8ece-e2352dc6cd32",
                  "name": "in 0",
                  "direction": "input",
                  "index": 0,
                  "color": "#969696"
                },
                {
                  "id": "59e8b939-3b30-49dc-8ece-e2352dc6cd32-input-1",
                  "nodeId": "59e8b939-3b30-49dc-8ece-e2352dc6cd32",
                  "name": "in 1",
                  "direction": "input",
                  "index": 1,
                  "color": "#969696"
                },
                {
                  "id": "59e8b939-3b30-49dc-8ece-e2352dc6cd32-input-2",
                  "nodeId": "59e8b939-3b30-49dc-8ece-e2352dc6cd32",
                  "name": "in 2",
                  "direction": "input",
                  "index": 2,
                  "color": "#969696"
                }
              ],
              "outputs": [
                {
                  "id": "59e8b939-3b30-49dc-8ece-e2352dc6cd32-output-0",
                  "nodeId": "59e8b939-3b30-49dc-8ece-e2352dc6cd32",
                  "name": "out",
                  "direction": "output",
                  "index": 0,
                  "color": "#969696"
                }
              ],
              "params": {
                "_rotation": 1,
                "operations": "\"-++\""
              },
              "pinnedParams": []
            },
            {
              "id": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda",
              "type": "Amplifier",
              "name": "Capacity",
              "position": {
                "x": 105,
                "y": 150
              },
              "inputs": [
                {
                  "id": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda-input-0",
                  "nodeId": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda",
                  "name": "in 0",
                  "direction": "input",
                  "index": 0,
                  "color": "#969696"
                },
                {
                  "id": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda-input-1",
                  "nodeId": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda",
                  "name": "in 1",
                  "direction": "input",
                  "index": 1,
                  "color": "#969696"
                }
              ],
              "outputs": [
                {
                  "id": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda-output-0",
                  "nodeId": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda",
                  "name": "out 0",
                  "direction": "output",
                  "index": 0,
                  "color": "#969696"
                },
                {
                  "id": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda-output-1",
                  "nodeId": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda",
                  "name": "out 1",
                  "direction": "output",
                  "index": 1,
                  "color": "#969696"
                }
              ],
              "params": {
                "gain": "C"
              }
            },
            {
              "id": "898f35c8-d85a-4860-a5a4-9913c01b9ab1",
              "type": "Integrator",
              "name": "Heat",
              "position": {
                "x": 105,
                "y": 285
              },
              "inputs": [
                {
                  "id": "898f35c8-d85a-4860-a5a4-9913c01b9ab1-input-0",
                  "nodeId": "898f35c8-d85a-4860-a5a4-9913c01b9ab1",
                  "name": "in 0",
                  "direction": "input",
                  "index": 0,
                  "color": "#969696"
                }
              ],
              "outputs": [
                {
                  "id": "898f35c8-d85a-4860-a5a4-9913c01b9ab1-output-0",
                  "nodeId": "898f35c8-d85a-4860-a5a4-9913c01b9ab1",
                  "name": "out 0",
                  "direction": "output",
                  "index": 0,
                  "color": "#969696"
                }
              ],
              "params": {
                "_rotation": 2,
                "initial_value": "T_0"
              }
            }
          ],
          "connections": [
            {
              "id": "d2ae0921-6394-4a5e-9a18-dee2370d419c",
              "sourceNodeId": "898f35c8-d85a-4860-a5a4-9913c01b9ab1",
              "sourcePortIndex": 0,
              "targetNodeId": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda",
              "targetPortIndex": 1
            },
            {
              "id": "ebad2519-510b-4635-ba52-9b979b916413",
              "sourceNodeId": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda",
              "sourcePortIndex": 1,
              "targetNodeId": "59e8b939-3b30-49dc-8ece-e2352dc6cd32",
              "targetPortIndex": 0
            },
            {
              "id": "cc990a24-8ad4-40d1-9b47-6cea58113abc",
              "sourceNodeId": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda",
              "sourcePortIndex": 0,
              "targetNodeId": "59e8b939-3b30-49dc-8ece-e2352dc6cd32",
              "targetPortIndex": 1
            },
            {
              "id": "4de8fc3d-01ec-42f0-ade8-933ec6adef4d",
              "sourceNodeId": "59e8b939-3b30-49dc-8ece-e2352dc6cd32",
              "sourcePortIndex": 0,
              "targetNodeId": "898f35c8-d85a-4860-a5a4-9913c01b9ab1",
              "targetPortIndex": 0
            },
            {
              "id": "1043a108-74c0-4cdb-b907-900aba7b9a2c",
              "sourceNodeId": "aaa27cad-0e92-4250-85d1-6f3ef379f0ee",
              "sourcePortIndex": 1,
              "targetNodeId": "5916faf3-e4e0-4cd4-9f9c-8ab72bbccbda",
              "targetPortIndex": 0
            },
            {
              "id": "6c58e742-ce70-4447-948a-92c8cb684a0d",
              "sourceNodeId": "aaa27cad-0e92-4250-85d1-6f3ef379f0ee",
              "sourcePortIndex": 0,
              "targetNodeId": "59e8b939-3b30-49dc-8ece-e2352dc6cd32",
              "targetPortIndex": 2
            },
            {
              "id": "0bbe41e0-8944-4072-98fb-6405695a9ce7",
              "sourceNodeId": "898f35c8-d85a-4860-a5a4-9913c01b9ab1",
              "sourcePortIndex": 0,
              "targetNodeId": "aaa27cad-0e92-4250-85d1-6f3ef379f0ee",
              "targetPortIndex": 0
            }
          ],
          "annotations": [
            {
              "id": "72cf3be3-a804-4dd0-a34a-94e06ee104e6",
              "position": {
                "x": -315,
                "y": 165
              },
              "content": "# House\n\nInternally the subsystem house is modeled by a 1st order linear ode:\n\n$$\n\\dot{T} = C (T_a - T) + H \n$$",
              "width": 200,
              "height": 115
            }
          ]
        }
      },
      {
        "id": "2d7f37e8-5b75-4d5e-bf82-812e3b2a0c2f",
        "type": "Scope",
        "name": "Temperature",
        "position": {
          "x": 900,
          "y": 315
        },
        "inputs": [
          {
            "id": "2d7f37e8-5b75-4d5e-bf82-812e3b2a0c2f-input-0",
            "nodeId": "2d7f37e8-5b75-4d5e-bf82-812e3b2a0c2f",
            "name": "in 0",
            "direction": "input",
            "index": 0,
            "color": "#969696"
          },
          {
            "id": "2d7f37e8-5b75-4d5e-bf82-812e3b2a0c2f-input-1",
            "nodeId": "2d7f37e8-5b75-4d5e-bf82-812e3b2a0c2f",
            "name": "in 1",
            "direction": "input",
            "index": 1,
            "color": "#969696"
          }
        ],
        "outputs": [],
        "params": {}
      },
      {
        "id": "5ad0e497-1837-42b7-ab94-bafb9aad06b9",
        "type": "Scope",
        "name": "Heater",
        "position": {
          "x": 900,
          "y": 120
        },
        "inputs": [
          {
            "id": "5ad0e497-1837-42b7-ab94-bafb9aad06b9-input-0",
            "nodeId": "5ad0e497-1837-42b7-ab94-bafb9aad06b9",
            "name": "in 0",
            "direction": "input",
            "index": 0,
            "color": "#969696"
          }
        ],
        "outputs": [],
        "params": {}
      }
    ],
    "connections": [
      {
        "id": "069466b7-d553-4aeb-842a-46c84f9a4440",
        "sourceNodeId": "07cc8b10-cb17-4c88-8e35-0c2482ed003b",
        "sourcePortIndex": 0,
        "targetNodeId": "00cd6eb8-c4f5-4014-85de-2db88eb99f20",
        "targetPortIndex": 0
      },
      {
        "id": "4f04d09e-9b90-49f3-82f9-49a4a6740f47",
        "sourceNodeId": "00cd6eb8-c4f5-4014-85de-2db88eb99f20",
        "sourcePortIndex": 0,
        "targetNodeId": "07cc8b10-cb17-4c88-8e35-0c2482ed003b",
        "targetPortIndex": 0
      },
      {
        "id": "ed525a1e-2ac9-4eba-a8e2-043d41a06409",
        "sourceNodeId": "00cd6eb8-c4f5-4014-85de-2db88eb99f20",
        "sourcePortIndex": 0,
        "targetNodeId": "2d7f37e8-5b75-4d5e-bf82-812e3b2a0c2f",
        "targetPortIndex": 0
      },
      {
        "id": "f19f209c-35f8-46b5-b3c0-d1d6aaf64808",
        "sourceNodeId": "62d00cb6-4196-4a37-b9da-ab858bc7ba2d",
        "sourcePortIndex": 0,
        "targetNodeId": "2eaf0529-6a47-4a10-b162-d94d188c97d6",
        "targetPortIndex": 1
      },
      {
        "id": "30736ff1-d8da-4d09-94a1-f8026b87c098",
        "sourceNodeId": "e9ec04e8-6f0b-4a0a-96ef-b0fcb78fba8b",
        "sourcePortIndex": 0,
        "targetNodeId": "2eaf0529-6a47-4a10-b162-d94d188c97d6",
        "targetPortIndex": 0
      },
      {
        "id": "38442a97-0b9d-4ee6-a4ad-dd0428c0da1b",
        "sourceNodeId": "2eaf0529-6a47-4a10-b162-d94d188c97d6",
        "sourcePortIndex": 0,
        "targetNodeId": "00cd6eb8-c4f5-4014-85de-2db88eb99f20",
        "targetPortIndex": 1
      },
      {
        "id": "e06d2cc0-ab94-44d4-9162-0abf8778d66f",
        "sourceNodeId": "2eaf0529-6a47-4a10-b162-d94d188c97d6",
        "sourcePortIndex": 0,
        "targetNodeId": "2d7f37e8-5b75-4d5e-bf82-812e3b2a0c2f",
        "targetPortIndex": 1
      },
      {
        "id": "ea390233-555c-437d-b2cc-cf96cfb20610",
        "sourceNodeId": "07cc8b10-cb17-4c88-8e35-0c2482ed003b",
        "sourcePortIndex": 0,
        "targetNodeId": "5ad0e497-1837-42b7-ab94-bafb9aad06b9",
        "targetPortIndex": 0
      }
    ],
    "annotations": [
      {
        "id": "584cd15b-ff8a-47f9-b137-e704ad1c44b4",
        "position": {
          "x": 240,
          "y": 240
        },
        "content": "# Thermostat\nA relay based thermostat heating system of a house. The house is modeled as a subsystem.\n- Double click the subsystem to view internals\n- Open the code editor (E) to adjust the parameters.",
        "width": 275,
        "height": 145
      }
    ]
  },
  "events": [],
  "codeContext": {
    "code": "# initial temperature of house\nT_0 = 23\n\n# ambient temperature (const, day-night)\nT_a = 10\nT_d = 5\n\n# thermal capacity of house\nC = 1\n\n# heater power\nH = 15*C\n\n# hi-lo thresholds for heater\nT_hi = 24\nT_lo = 21"
  },
  "simulationSettings": {
    "duration": "24",
    "dt": "",
    "solver": "RKBS32",
    "adaptive": true,
    "atol": "1e-6",
    "rtol": "1e-4",
    "ftol": "1e-9",
    "dt_min": "",
    "dt_max": "2",
    "ghostTraces": 0,
    "plotResults": true
  }
}